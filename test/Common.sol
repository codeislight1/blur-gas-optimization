// SPDX-License-Identifier: MIT
pragma solidity 0.8.17;

import {Test} from "forge-std/Test.sol";
import "forge-std/console.sol";

contract Common is Test {
    // blur exchange proxy contract
    address internal owner = 0xFA9fB502534761dBDDAcf5B7e2Aa84684815F1bb;
    address internal proxy = 0x000000000000Ad05Ccc4F10045630fb830B95127;
    // block before the tx has been mined, both transactions were mined in the same block
    uint256 internal blocknumber = 16660573 - 1;
    // https://etherscan.io/tx/0xa0c7742713c3de84d117309abb892ed22c7da0cf21463be73f14a9bf041cbe56
    // execute function caller
    address internal executeCaller = 0x6E1510ED41BA743344e9BA80646194351CCa0C7f;
    // tx calldata retrieved from etherscan
    bytes internal executeCalldata =
        hex"9a1fc3a7000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000003e000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000001ca94fa58e948ecf88682fb7a04c26124c86cf705f47633fef9ee4223fd7b7fa8d3de27230c42a808757405a691f7a4d81285ead3f1cde06765d675b2993168e3b000000000000000000000000000000000000000000000000000000000000032000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000fe385b0000000000000000000000006a76707157353e5248d41653c2771a0b2e11db5200000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000dab4a563819e8fd93dba3b25bc3495000000000000000000000000e6160325a53de4deca66e3d88d7e4f25040acce000000000000000000000000000000000000000000000000000000000000003b3000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000444759eec6ec0000000000000000000000000000000000000000000000000000000000063ebd8dc0000000000000000000000000000000000000000000000000000000063f5135c00000000000000000000000000000000000000000000000000000000000001a000000000000000000000000000000000255b9117d296a3fc4c113e3d56ba0bc80000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000320000000000000000000000004cbe959cb852745541ef89094be7ad0ad3fdf00c000000000000000000000000000000000000000000000000000000000000000101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000001b566164e8b95fafa29bdd58506cd17cf9f868f24210d654f5061efb34f6398493757175ff1d4cb5ab7c3a0f4eee8d25877e8935775097c1cb10440b29dd734f8e00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000fe385b0000000000000000000000006e1510ed41ba743344e9ba80646194351cca0c7f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dab4a563819e8fd93dba3b25bc3495000000000000000000000000e6160325a53de4deca66e3d88d7e4f25040acce000000000000000000000000000000000000000000000000000000000000003b3000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000444759eec6ec0000000000000000000000000000000000000000000000000000000000063ebd8dd0000000000000000000000000000000000000000000000000000000063f1c1fa00000000000000000000000000000000000000000000000000000000000001a0000000000000000000000000000000000ec74d2c9b12275e0805546f3a86aecf00000000000000000000000000000000000000000000000000000000000001c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000001bf9e933e53a06d68bfc6fd507e7057796739402919173b26ba15d5cef087edae63ee4a0e5e8544a5bb06b8fdaf674552b4de4823db66df9dee89eb626132e9031";
    uint256 internal executeValue = 0.3075 ether;

    // https://etherscan.io/tx/0xc16f67ce5dd5b1048be2f197779b0950d1c6a14c41313dffb0f9d0498c4b0cf4
    // bulkExecute function caller
    address internal bulkExecuteCaller = 0x1F14F9c2FfaB9111cDfd84E4d6F67852a749dE46;
    // tx calldata retrieved from etherscan
    bytes internal bulkExecuteCalldata =
        hex"b3be57f800000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000008a00000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000001b3cb57651ba8218187432c7de2ff8b75801b0338ceef20c2770d34fedbf05125a58ed0b68c213be180618bddcb4f965d2b11b7c9f75726d2af5ef7f7c6e09ebb0000000000000000000000000000000000000000000000000000000000000032000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000fe385b000000000000000000000000c353062e0043ab93fff0ef4b86c58989c417166d00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000dab4a563819e8fd93dba3b25bc34950000000000000000000000006339e5e072086621540d0362c4e3cea0d643e11400000000000000000000000000000000000000000000000000000000000019240000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001ca4cd1080680000000000000000000000000000000000000000000000000000000000063f1a8580000000000000000000000000000000000000000000000000000000063fae2d000000000000000000000000000000000000000000000000000000000000001a000000000000000000000000000000000ae60856dcbf402fbfbcdafe6f5fcb7a2000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000032000000000000000000000000c8f8e2f59dd95ff67c3d39109eca2e2a017d4c8a0000000000000000000000000000000000000000000000000000000000000001010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001800000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000001b23f75c752af6cf8506749da3de0b2ae141afc3243e6388f22efaaddf4d1b2fa84e679eb5db1ea272b8b91b8899d5a03d110f6b3129cf7118adacb783f1307f5800000000000000000000000000000000000000000000000000000000000000075a3e8015710aaf3258003269d25ba27cfd7b5c81b2349f74ac12b4cc5ac8cd5d472cfb5df58f533d3da7a61361526ba90c846e80362ae7b4aea44d56bfd382ba22b95ad0894c62f821241c31c627aa34bb8fc1be9c792b3c845336ea83526979beada385351221438dd7df8f69fdd85b6db65997e718aafb55061a9fdf0ea5c94eeacdc8c7d8471ee79af43bb5cc36b129e356550224376b906f6eb32f047869b3ee59a370bd6c75345c5642874279f1212a57d548ebf392441e34a1f730bdb9f9b3208a1c0d8f5262e942b6f17ba9bdb183a8500e7086b9df4b435d8741545e00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000fe385b0000000000000000000000001f14f9c2ffab9111cdfd84e4d6f67852a749de4600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dab4a563819e8fd93dba3b25bc34950000000000000000000000006339e5e072086621540d0362c4e3cea0d643e11400000000000000000000000000000000000000000000000000000000000019240000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001ca4cd1080680000000000000000000000000000000000000000000000000000000000063f1a8590000000000000000000000000000000000000000000000000000000063f1c20100000000000000000000000000000000000000000000000000000000000001a000000000000000000000000000000000dee48d6c1805948bbed1b39fca8cf3a800000000000000000000000000000000000000000000000000000000000001c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000001c62b46f7817430861453e1b66784a551a665f4e666d1fae077d99f238d8ec217a55639f0d61636605501503c2378687f3b5953f9159c41c7e600517a2541afdb90000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000001b3cb57651ba8218187432c7de2ff8b75801b0338ceef20c2770d34fedbf05125a58ed0b68c213be180618bddcb4f965d2b11b7c9f75726d2af5ef7f7c6e09ebb0000000000000000000000000000000000000000000000000000000000000032000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000fe385b000000000000000000000000c353062e0043ab93fff0ef4b86c58989c417166d00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000dab4a563819e8fd93dba3b25bc34950000000000000000000000006339e5e072086621540d0362c4e3cea0d643e1140000000000000000000000000000000000000000000000000000000000001ade0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001ca4cd1080680000000000000000000000000000000000000000000000000000000000063f1a8580000000000000000000000000000000000000000000000000000000063fae2d000000000000000000000000000000000000000000000000000000000000001a000000000000000000000000000000000a259fa87d36843bf93d02f5e6ede3346000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000032000000000000000000000000c8f8e2f59dd95ff67c3d39109eca2e2a017d4c8a0000000000000000000000000000000000000000000000000000000000000001010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001800000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000001b1e9a3b1c86ccf9e3a79cfae2808d859bb27b8d7854ab35250e7cde7c6b1f082406c3ba1ba53c83454a032f506a8a790863ff9de5f10d22839fcace042d9f36bf000000000000000000000000000000000000000000000000000000000000000770fe237c6a0a9eebc5985fb64ece796936f5719a91924c1c7c026a18573a4f3c580b2e6ba896c59099a526e282df2a7f9125a85369cc4fdf484357b01c52d7cc7f95817f2d50ef380421f188071c275964586df0ed55266b5d54d573be2ea251f4425e66fdf5719a24aa7fb04edfbd7cb54649e43d1fa4a490cec49eb9a3a09acf0f07d12683507d6a1d2f65663c77ddf78daa8477043419a0bb29fe0fc5333db4c1fce5da2df328c9af69446747c21f33bc8907b64047b1e5002b92f1dba5caf9b3208a1c0d8f5262e942b6f17ba9bdb183a8500e7086b9df4b435d8741545e00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000fe385b0000000000000000000000001f14f9c2ffab9111cdfd84e4d6f67852a749de4600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dab4a563819e8fd93dba3b25bc34950000000000000000000000006339e5e072086621540d0362c4e3cea0d643e1140000000000000000000000000000000000000000000000000000000000001ade0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001ca4cd1080680000000000000000000000000000000000000000000000000000000000063f1a8590000000000000000000000000000000000000000000000000000000063f1c20100000000000000000000000000000000000000000000000000000000000001a0000000000000000000000000000000002ba941458658f10fde191d96dcad74f000000000000000000000000000000000000000000000000000000000000001c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000001c6ef14a04f4073a22cdbafcf19748dd178d5aaf7a4da6ac0cc706f9bdc76617fc1e195e69d5da9815181c0605381ad250e3d322b6e194b76f7adba75fb66434b4";
    uint256 internal bulkExecuteValue = 0.258 ether;

    function callBlurExchange(address caller, uint256 value, bytes memory data) internal {
        // use original tx caller
        vm.startPrank(caller);
        uint256 preCall = gasleft();
        (bool success,) = address(proxy).call{value: value, gas: gasleft()}(data);
        uint256 postCall = gasleft();
        // calculating call gas consumed
        console.log(
            executeCaller == caller ? "execute call gas consumed:" : "bulkExecute call gas consumed:",
            preCall - postCall
        );
        require(success, "!success");
        vm.stopPrank();
    }
}
